# ビジュアルアセンブラ（Visual Assembler, vasm）

## 概要

ビジュアルアセンブラ（vasm）は、Blocklyベースのビジュアルプログラミング環境で、HC4/HC8 CPUアーキテクチャ向けのアセンブリプログラムを直感的に作成できます。ドラッグ&ドロップで命令やラベルを組み合わせ、即座にアセンブリコードを生成・保存できます。

## 主な特徴

- HC4/HC8命令セット（DICTHC4）に完全対応
- ラベル定義・ジャンプ命令（JP/GOTO）・即値・レジスタ選択などをブロックで表現
- Blocklyによる視覚的なプログラミング
- Electronアプリとしてオフライン動作
- アセンブリファイルのエクスポート機能
- Scratch風のラベル管理（新規作成・選択・自動反映）

## 使い方

1. `index.html`をElectronアプリとして起動（またはWebサーバで開く）
2. 左側のツールボックスから命令やラベルブロックをドラッグ＆ドロップ
3. ブロックを組み合わせてプログラムを作成
4. 下部に生成されるアセンブリコードを確認
5. 「保存」ボタンでアセンブリファイル（.asm）としてエクスポート

## ブロックの種類

- **命令ブロック**: SM, SC, SU, AD, XR, OR, AN, SA, LM, LD, LI, JP, NP
- **ラベル定義ブロック**: 任意のラベル名を定義し、ジャンプ先として利用可能
- **GOTOブロック**: ラベル名を指定してジャンプ（LI+JP命令列を自動生成）
- **JPブロック**: フラグ条件ジャンプ

## ラベル管理

- ラベルは「ラベル」ブロックで定義
- JPやGOTOブロックのドロップダウンから既存ラベルを選択、または新規作成
- 新規ラベル作成時はダイアログで名前を入力
- すべてのラベル関連ブロックに即時反映

## ファイル構成

- `index.html` : メインUI・Blockly定義・コード生成
- `main.js` : Electronメインプロセス
- `preload.js` : ElectronセキュアAPIブリッジ
- `package.json` : Electronアプリ設定

## ライセンス

本ツールはMITライセンスです。

---

ご意見・バグ報告はリポジトリのIssueまでお願いします。